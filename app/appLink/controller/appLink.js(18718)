(function() {   
    'use strict';   
    angular
        .module('AkosPCP.appLink')
        .controller('appLink', appLink);
    appLink.$inject = ['$scope','$http','$rootScope','$location','$window','$log','$cookieStore','$state','$uibModal','moment'];
    function appLink($scope,$http,$rootScope,$location,$window,$log,$cookieStore,$state,$uibModal,moment) {
        $log.log($location);
        //var vm = this;
        $rootScope.title = "AppLink"; 
        
        var ua = navigator.userAgent.toLowerCase();
        var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");

        if(isAndroid) {
            $scope.appStore = "PLAY";
            if(typeof $state.params.thirdParty != 'undefined'){
                var url = "akosmd:///"+$state.params.roomID+'/'+$state.params.thirdParty;//testAkosDoctor(latest)---patientapp(previous)
                //var providerUrl = "akosmd:///"+$state.params.roomID+'/'+$state.params.thirdParty;
            }else{
                var url = "akosmd:///"+$state.params.roomID+'/'+$state.params.type;
            }
        }else{
            $scope.appStore = "APP";
            if(typeof $state.params.thirdParty != 'undefined'){
                var url = "testAkosDoctor:///"+$state.params.roomID+'/'+$state.params.thirdParty; //testAkos changed to testAkosDoctor-shubham sir(1-6-18)
                var providerUrl = "testAkos:///"+$state.params.roomID+'/'+$state.params.thirdParty;
            }else{
                var url = "testAkosDoctor:///"+$state.params.roomID+'/'+$state.params.type; 
                var providerUrl = "testAkos:///"+$state.params.roomID+'/'+$state.params.type;
            }
            
           
        }



        $scope.downloadApp = function(){
        	if(isAndroid) {
                
        		window.location = "https://play.google.com/store/apps/details?id=com.akosmd.patientapp";

        	}else{
                
        		window.location = "https://itunes.apple.com/us/app/akos/id1187895369?ls=1&mt=8";    	
        	}	
           	
        }
        
        $scope.openApp = function(para){
            
           if(para==false || para==undefined){ window.location = providerUrl; }
           else{ window.location = url; }
        }
        // setTimeout(function () { window.location = "https://itunes.apple.com/appdir"; }, 25);
        // 
    }
})();
 